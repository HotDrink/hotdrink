<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Introduction to HotDrink</title>
<!-- 2015-03-18 Wed 14:20 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<script type="text/javascript" src="hotdrink.min.js"></script>
<link rel="stylesheet" type="text/css" href="style.css"/>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/javascript" src="http://orgmode.org/mathjax/MathJax.js"></script>
<script type="text/javascript">
<!--/*--><![CDATA[/*><!--*/
    MathJax.Hub.Config({
        // Only one of the two following lines, depending on user settings
        // First allows browser-native MathML display, second forces HTML/CSS
        //  config: ["MMLorHTML.js"], jax: ["input/TeX"],
            jax: ["input/TeX", "output/HTML-CSS"],
        extensions: ["tex2jax.js","TeX/AMSmath.js","TeX/AMSsymbols.js",
                     "TeX/noUndefined.js"],
        tex2jax: {
            inlineMath: [ ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"], ["\\begin{displaymath}","\\end{displaymath}"] ],
            skipTags: ["script","noscript","style","textarea","pre","code"],
            ignoreClass: "tex2jax_ignore",
            processEscapes: false,
            processEnvironments: true,
            preview: "TeX"
        },
        showProcessingMessages: true,
        displayAlign: "center",
        displayIndent: "2em",

        "HTML-CSS": {
             scale: 100,
             availableFonts: ["STIX","TeX"],
             preferredFont: "TeX",
             webFont: "TeX",
             imageFont: "TeX",
             showMathMenu: true,
        },
        MMLorHTML: {
             prefer: {
                 MSIE:    "MML",
                 Firefox: "MML",
                 Opera:   "HTML",
                 other:   "HTML"
             }
        }
    });
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Introduction to HotDrink</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Overview of basic concepts</a>
<ul>
<li><a href="#sec-1-1">1.1. Constraint systems</a></li>
<li><a href="#sec-1-2">1.2. MVVM</a></li>
</ul>
</li>
<li><a href="#sec-2">2. Including HotDrink in your web page</a></li>
<li><a href="#sec-3">3. Important HotDrink objects</a>
<ul>
<li><a href="#sec-3-1">3.1. The model</a></li>
<li><a href="#sec-3-2">3.2. The model builder</a></li>
<li><a href="#sec-3-3">3.3. The constraint system</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Overview of basic concepts</h2>
<div class="outline-text-2" id="text-1">
<p>
HotDrink is a JavaScript library that assists with GUI implementation.
HotDrink allows you to program GUIs <i>declaratively</i>&#x2014;instead of
writing event handlers that control what should happen in a GUI and when,
the programmer specifies the relationships between various pieces of
data in the GUI and ways in which those relationships may be enforced.
From this description, HotDrink decides how and when to enforce relationships,
and also implements several GUI behaviors
that can be reused with little effort.
</p>
</div>

<div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> Constraint systems</h3>
<div class="outline-text-3" id="text-1-1">
<p>
The heart of the HotDrink library is a <i>constraint system</i>.  A
constraint system manages variables and <i>constraints</i> among the variables.  Each
constraint represents something that should be true concerning some of the
variables (i.e., a <i>relation</i> over those variables).
For example, given three variables, \(x\), \(y\), and \(z\), you
could create a constraint that \(x = y + z\), or that \(x \le y \le z\), or even that \(z\)
is the result of a database query using \(x\) and \(y\).  When the
constraint is true, we say it is <i>satisfied</i>.  HotDrink <i>enforces</i> a
constraint by modifying some of the variables involved so that the constraint is
satisfied.
</p>

<p>
In HotDrink's constraint system, constraints between variables are expressed
as sets of functions.  These functions are called <i>methods</i> (short for
<i>constraint satisfaction methods</i>) and are written by the programmer.  Each
method is responsible for calculating new values for some of the constraint's
variables so that the constraint will be satisfied.  To enforce all
constraints, HotDrink executes one method from each constraint.  Together, the
methods executed define a <i>dataflow</i> &#x2014; a branching path showing which
variables are used to update which other variables.  HotDrink has a
<i>multi-way dataflow constraint system</i>, meaning there are many possible
dataflows depending on which methods are executed.  In general, HotDrink
selects a dataflow that preserves variables the user has edited more recently.
</p>

<p>
In a HotDrink &ldquo;powered&rdquo; user interface, GUI events are translated to changes
to constraint system variables.  These changes result
in constraints which are no longer satisfied.  HotDrink
responds by <i>solving</i> the constraint system &#x2014; that is, selecting which methods
to execute, and then executing them so that all constraints are again
satisfied.  Solving can change the values of the system's variables; the
changed values are then somehow
displayed or visualized to the user, as specified by the programmer.
</p>
</div>
</div>

<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> MVVM</h3>
<div class="outline-text-3" id="text-1-2">
<p>
Applications written with HotDrink follow the Model-View-ViewModel
(a.k.a. MVVM) design pattern.  This pattern divides the application as
follows:
</p>

<ul class="org-ul">
<li>The <i>view</i> is responsible for presentation and capturing
interactions with the user.  It arranges everything on the screen
and provides events that indicate user actions.  For our purposes,
the view is specified in HTML, along with JavaScript that
generates and modifies the HTML.  This tutorial shows bits and snippets of HTML, with
some commentary to help understand the examples, but in general we assume familiarity
with HTML, JavaScript, and constructing web pages.
</li>

<li>The <i>view-model</i> is responsible for managing the data presented in
the view. This means supplying the data to the view to be displayed,
as well as responding to user actions.  The purpose of
HotDrink is to help in implementing the view-model.
</li>

<li>Another important part of an MVVM application are the <i>bindings</i>.  A
binding connects elements in the view with variables in the
view-model.  The bindings are sometimes treated as part of the
view&#x2014;that is why there is no "B" in "MVVM"&#x2014;but we treat them as
a distinct component of the pattern.  In HotDrink, bindings can be
specified in JavaScript, or as annotations in HTML as part of the
view specification.
</li>

<li>The <i>model</i> is responsible for everything else&#x2014;whatever the
application is actually supposed to <i>do</i>.  The model does not need to
be aware of the user interface; therefore we will not discuss it further in
this documentation.
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Including HotDrink in your web page</h2>
<div class="outline-text-2" id="text-2">
<p>
To use HotDrink, include the file <a href="hotdrink.min.js"><code>hotdrink.min.js</code></a> that came with
this tutorial.  Alternatively, if you downloaded the source tree,
follow the build instructions to compile your own <code>hotdrink.min.js</code>.
</p>

<p>
More specifically, that means adding the following <code>&lt;script&gt;</code> tag to
the <code>&lt;head&gt;</code> section
of your HTML, with the appropriate path in the <code>src</code> attribute.  In
order for the examples in this tutorial to work, the file
<code>hotdrink.min.js</code> must be located in the same directory as this HTML
file.
</p>

<div class="org-src-container">

<pre class="src src-html">&lt;<span style="color: #006699;">script</span> <span style="color: #BA36A5;">type</span>=<span style="color: #008000;">"text/javascript"</span> <span style="color: #BA36A5;">src</span>=<span style="color: #008000;">"hotdrink.min.js"</span>&gt;&lt;/<span style="color: #006699;">script</span>&gt;
</pre>
</div>

<p>
HotDrink does not rely on any other JavaScript frameworks, but neither should it
conflict with other frameworks (JQuery, Dojo, MooTools, etc.).
The only global symbol it exports is <code>hd</code>, and all of its interactions
with the DOM are via cooperative API functions, e.g.,
<a href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget.addEventListener"><code>addEventListener</code></a>, etc.
</p>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Important HotDrink objects</h2>
<div class="outline-text-2" id="text-3">
<p>
There are three important objects which you will need to interact with when
using HotDrink.
</p>
</div>

<div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1"><span class="section-number-3">3.1</span> The model</h3>
<div class="outline-text-3" id="text-3-1">
<p>
The model is HotDrink's representation of the data in your
interface. Though we have named it the model, it is really the
view-model of the MVVM pattern.  As described above, it consists of
variables that hold data, and constraints that define how those
variables are related.  The model also serves as a naming mechanism for
variables: when a variable is created, it is given a name, and stored
as a property of the model under that name.
For example, when defining the model <code>model</code>,
a variable created with the name <code>x</code> is accessible as <code>model.x</code>.
</p>
</div>
</div>

<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2"><span class="section-number-3">3.2</span> The model builder</h3>
<div class="outline-text-3" id="text-3-2">
<p>
The task of building a model is rather complex, involving calls to multiple
functions with long signatures.  To help in constructing models, HotDrink
contains an object called the <i>model builder</i>.  The model builder
essentially defines its own language (i.e., an <i>embedded domain-specific language</i>)
for constructing constraint systems.  To use
the language, create a new model builder instance, then call its
various member functions to add elements to the model. These member
functions are described in detail in <a href="basics.html">Basic HotDrink Usage</a>. The
<code>end</code> member function retrieves the constructed model.
</p>
<div class="org-src-container">

<pre class="src src-js"><span style="color: #0000FF;">var</span> <span style="color: #BA36A5;">builder</span> = <span style="color: #0000FF;">new</span> <span style="color: #6434A3;">hd.ModelBuilder</span>();

<span style="color: #8D8D84;">// </span><span style="color: #8D8D84; font-style: italic;">...invoke various builder member functions to build the model ...</span>

<span style="color: #0000FF;">var</span> <span style="color: #BA36A5;">model</span> = builder.end();
</pre>
</div>
</div>
</div>


<div id="outline-container-sec-3-3" class="outline-3">
<h3 id="sec-3-3"><span class="section-number-3">3.3</span> The constraint system</h3>
<div class="outline-text-3" id="text-3-3">
<p>
As explained in Section <a href="#sec-1-1">1.1</a>, the heart of HotDrink is a
constraint system.  The task of the constraint system is to enforce the
constraints of the model.  However, the two are separate entities.
A model can exist without a constraint system; that simply means that no one is enforcing its constraints.
</p>

<p>
To use a constraint system, create a new instance, then register a model with a constraint system.
</p>

<div class="org-src-container">

<pre class="src src-js"><span style="color: #0000FF;">var</span> <span style="color: #BA36A5;">system</span> = <span style="color: #0000FF;">new</span> <span style="color: #6434A3;">hd.ConstraintSystem</span>();

system.addComponent( model );
</pre>
</div>

<p>
A model added to a constraint system can be later removed, if needed:
</p>

<div class="org-src-container">

<pre class="src src-js">system.removeComponent( model );
</pre>
</div>

<p>
As those function names suggest, the full model for your application can
actually consist of several different components, and new components can be
added or removed at run-time.  For now we assume one component only and
consider it as the entire model.
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Created: 2015-03-18 Wed 14:20</p>
<p class="validation"></p>
</div>
</body>
</html>
