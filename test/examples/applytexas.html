<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
	<meta charset="utf-8">
  <link rel="stylesheet" type="text/css" href="https://www.applytexas.org/adappc/html/preview12/preview_core.css">
  <script type="text/javascript" src="https://raw.github.com/kriskowal/es5-shim/master/es5-shim.min.js"></script>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script type="text/javascript" src="../js/hotdrink.js"></script>
  <title>ApplyTexas | HotDrink Demo</title>
  <style>
    input[id^=org],
    input[id^=desc],
    input[id^=position]
    {
      width: 30em !important;
    }

    input[id^=hours],
    input[id^=weeks]
    {
      width: 6em !important;
    }

    button {
      padding: 0;
      border: 0;
      background-color: inherit;
    }

    #content th {
      position: relative;
    }

    #content th button {
      display: none;
      position: absolute;
      top: 0;
      width: 1em;
      height: 1em;
      margin: auto 0;
      font-size: 22px;
      -webkit-transition: all 0.2s;
      -moz-transition: all 0.2s;
      -ms-transition: all 0.2s;
      -o-transition: all 0.2s;
      transition: all 0.2s;
    }

    #content th button:hover {
      -webkit-transform: scale(1.3);
      -moz-transform: scale(1.3);
      -ms-transform: scale(1.3);
      -o-transform: scale(1.3);
      transform: scale(1.3);
    }

    #content th:hover button {
      display: block;
    }

    #content th .demote {
      right: .5em;
      color: red;
    }

    #content th .demote:hover {
      text-shadow: 0 0 1px #000,
        0 0 10px rgba(199, 107, 107, 0.8);
    }

    #content th .demote:after {
      content: '▼';
    }

    #content th .promote {
      /* Strange correction needed. */
      font-size: 24px;
      right: 2em;
      color: green;
    }

    #content th .promote:hover {
      text-shadow: 0 0 1px #000,
        0 0 10px rgba(107, 199, 107, 0.8);
    }

    #content th .promote:after {
      content: '▲';
    }
  </style>
  <script type="text/javascript">

    var LEVELS = [
      "LOCAL",
      "CITY",
      "DISTRICT",
      "BI-DISTRICT",
      "REGIONAL",
      "STATE",
      "NATIONAL"
    ];

    var ActivityYear = hd.model(function ActivityYear(year, index) {
      this.isActive  = hd.variable(false);
      this.year      = year;
      this.position  = hd.variable("");
      this.isElected = hd.variable("X");
      this.hours     = hd.variable(0);
      this.weeks     = hd.variable(0);
      this.id        = hd.computed(function () {
        return year + index();
      });
    });

    var Activity = hd.model(function Activity(list) {
      this.index = hd.computed(function () {
        return list().indexOf(this) + 1;
      });
      this.name  = hd.variable("");
      this.level = hd.variable();
      this.description = hd.variable("");
      this.years = ["Fresh", "Soph", "Junior", "Senior"].map(function(year) {
        return new ActivityYear(year, this.index);
      }, this);
    });

    var Model = hd.model(function Model() {
      this.activities = hd.list([]);
      this.activities.push(new Activity(this.activities));
      this.activities.push(new Activity(this.activities));
    });

    Model.prototype.promote = function promote(activity) {
      var i = this.activities().indexOf(activity);
      this.activities.swap(i, i - 1);
    };

    Model.prototype.demote = function demote(activity) {
      var i = this.activities().indexOf(activity);
      this.activities.swap(i, i + 1);
    };

    var model = new Model;

    var act1 = model.activities()[0];
    act1.name("SPEECH CLUB");
    act1.description("EXTEMPORANEOUS SPEAKING");

    $(document).ready(function () {
      hd.bind(model);
    });
  </script>
</head>
<body>
  <div id="content">
    <table>
      <tbody data-bind="foreach: activities">
        <tr>
          <th colspan="2">
            <strong><big>Activity <span data-bind="text: index"></span></big></strong>
            <button class="promote" data-bind="click: @ $parent.promote($this) @"></button>
            <button class="demote" data-bind="click: @ $parent.demote($this) @"></button>
          </th>
        </tr>

        <tr>
          <td scope="col">
            <div class="ctrlHolder blocklabel">
              <label data-bind="attr: { for: `'org' + index()` }">
                Organization / Activity</label>
              <input type="text" maxlength=40 data-bind=
                "attr: { id: `'org' + index()`, title: `'Activity ' + index() + ' organization or activity name.'` },
                textbox: name"/>
            </div>

            <div class="ctrlHolder blocklabel">
              <label data-bind="attr: { for: `'desc' + index()` }">
                Description</label>
              <input type="text" maxlength=70 data-bind=
                "attr: { id: `'desc' + index()`, title: `'Activity ' + index() + ' description.'` },
                textbox: description"/>
            </div>
          </td>

          <td>
            <div class="ctrlHolder blocklabel">
              <label data-bind="attr: { for: `'lev' + index()` }">
                Activity <span data-bind="text: index"></span> level
              </label>
              <select data-bind="attr: { id: `'lev' + index()` }, selectOne: level, foreach: LEVELS">
                <option data-bind="attr: { value: $this }, text: $this"></option>
              </select>
            </div>
          </td>
        </tr>

        <tr>
          <td colspan="2">
            Participation Details for Activity
            <span data-bind="text: index"></span>
            (Use whole numbers only, no fractions.)

            <table class="hours_weeks">
              <thead>
                <tr>
                  <th scope="col">Year</th>
                  <th scope="col">Position(s) Held</th>
                  <th scope="col">Were You Elected?</th>                
                  <th scope="col">Hours/week</th> 
                  <th scope="col">Weeks/year</th>
                </tr>
              </thead>
              <tbody data-bind="foreach: years">
                <tr>
                  <th scope="row">
                    <input type="checkbox" data-bind=
                      "attr: { id: `'active' + id()` }, checkbox: isActive"/>
                    <label class="inline" data-bind=
                      "attr: { for: `'active' + id()` }, text: year"></label>
                  </th>
                  <td>
                    <label class="hide" data-bind="attr: { for: `'pos' + id()` }">Position(s) Held</label>
                    <input type="text" maxlength=40 data-bind=
                      "attr: { id: `'pos' + id()`, title: `'Activity ' + index() + ' positions held.'` },
                      textbox: position"/>
                  </td>
                  <td>
                    <label class="hide" data-bind=
                      "attr: { for: `'elect' + id()` }">Were you elected?</label>
                    <select data-bind=
                      "attr: { id: `'elect' + id()` }, selectOne: isElected">
                      <option value="Y" data-bind=
                        "attr: { title: `'Activity ' + index() + ' elected: Yes.'` }">
                        Yes</option>
                      <option value="N" data-bind=
                        "attr: { title: `'Activity ' + index() + ' elected: No.'` }">
                        No</option>
                      <option value="X" data-bind=
                        "attr: { title: `'Activity ' + index() + ' elected: Not Applicable.'` }">
                        Not Applicable</option>
                    </select>
                  </td>
                  <td>
                    <label class="hide" data-bind=
                      "attr: { for: `'hours' + id()` }, text: 'Hours per week'"></label>
                    <input type="text" maxlength=2 data-bind=
                      "attr: { id: `'hours' + id()` }, textbox: hours"/>
                  </td>
                  <td>
                    <label class="hide" data-bind=
                      "attr: { for: `'weeks' + id()` }, text: 'Weeks per year'"></label>
                    <input type="text" maxlength=2 data-bind=
                      "attr: { id: `'weeks' + id()` }, textbox: weeks"/>
                  </td>
                </tr>
              </tbody>
            </table>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</body>
</html>

