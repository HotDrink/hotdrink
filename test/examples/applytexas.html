<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
  <link rel="stylesheet" type="text/css" href="https://www.applytexas.org/adappc/html/preview12/preview_core.css">
  <script type="text/javascript" src="https://raw.github.com/kriskowal/es5-shim/master/es5-shim.min.js"></script>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script type="text/javascript" src="../js/hotdrink.js"></script>
  <title>ApplyTexas | HotDrink Demo</title>
  <style>
    input[id^=org],
    input[id^=desc],
    input[id^=position]
    {
      width: 30em !important;
    }

    input[id^=hours],
    input[id^=weeks]
    {
      width: 6em !important;
    }
  </style>
  <script type="text/javascript">

    var LEVELS = [
      "LOCAL",
      "CITY",
      "DISTRICT",
      "BI-DISTRICT",
      "REGIONAL",
      "STATE",
      "NATIONAL"
    ];

    var ActivityYear = hd.model(function ActivityYear(activity, name) {
      this.isActive  = hd.variable(false);
      this.name      = name;
      this.position  = hd.variable("");
      this.isElected = hd.variable("X");
      this.hours     = hd.variable(0);
      this.weeks     = hd.variable(0);

      /* A richer binding syntax could eliminate these. */
      this.weeksId = hd.computed(function () {
        return "weeks" + this.name + activity.index();
      });
      this.hoursId = hd.computed(function () {
        return "hours" + this.name + activity.index();
      });
      this.electId = hd.computed(function () {
        return "elect" + this.name + activity.index();
      });
      this.electTitleY = hd.computed(function () {
        return "Activity " + activity.index() + " elected: Yes."
      });
      this.electTitleN = hd.computed(function () {
        return "Activity " + activity.index() + " elected: No."
      });
      this.electTitleNA = hd.computed(function () {
        return "Activity " + activity.index() + " elected: Not Applicable."
      });
      this.posId = hd.computed(function () {
        return "pos" + this.name + activity.index();
      });
      this.posTitle = hd.computed(function () {
        return "Activity " + activity.index() + " positions held.";
      });
      this.activeId = hd.computed(function () {
        return "active" + this.name + activity.index();
      });
    });

    var Activity = hd.model(function Activity(list) {
      this.index = hd.computed(function () {
        return list().indexOf(this) + 1;
      });
      this.name  = hd.variable("");
      this.level = hd.variable();
      this.description = hd.variable("");
      this.years = ["Fresh", "Soph", "Junior", "Senior"].map(function(name) {
        return new ActivityYear(this, name);
      }, this);

      this.levelId = hd.computed(function () {
        return "lev" + this.index();
      });
      this.descId = hd.computed(function () {
        return "desc" + this.index();
      });
      this.descTitle = hd.computed(function () {
        return "Activity " + this.index() + " description.";
      });
      this.nameId = hd.computed(function () {
        return "org" + this.index();
      });
      this.nameTitle = hd.computed(function () {
        return "Activity " + this.index() + " organization or activity name.";
      });
    });

    var Model = hd.model(function Model() {
      this.activities = hd.list([]);
      this.activities.push(new Activity(this.activities));
      this.activities.push(new Activity(this.activities));
    });

    var model = new Model;

    var act1 = model.activities()[0];
    act1.name("SPEECH CLUB");
    act1.description("EXTEMPORANEOUS SPEAKING");

    $(document).ready(function () {
      hd.bind(model);
    });
  </script>
</head>
<body>
  <div id="content">
    <table>
      <tbody data-bind="foreach: activities">
        <tr>
          <th colspan="2"><strong><big>
                Activity <span data-bind="text: index"></span>
          </big></strong></th>
        </tr>

        <tr>
          <td scope="col">
            <div class="ctrlHolder blocklabel">
              <label data-bind="attr: { for: nameId }">
                Organization / Activity</label>
              <input type="text" maxlength=40 data-bind="attr: { id: nameId, title: nameTitle }, textbox: name"/>
            </div>

            <div class="ctrlHolder blocklabel">
              <label data-bind="attr: { for: descId }">
                Description</label>
              <input type="text" maxlength=70 data-bind="attr: { id: descId, title: descTitle}, textbox: description"/>
            </div>
          </td>

          <td>
            <div class="ctrlHolder blocklabel">
              <label data-bind="attr: { for: levelId }">
                Activity <span data-bind="text: index"></span> level
              </label>
              <select data-bind="attr: { id: levelId }, selectOne: level, foreach: LEVELS">
                <option data-bind="attr: { value: $this }, text: $this"></option>
              </select>
            </div>
          </td>
        </tr>

        <tr>
          <td colspan="2">
            Participation Details for Activity
            <span data-bind="text: index"></span>
            (Use whole numbers only, no fractions.)

            <table class="hours_weeks">
              <thead>
                <tr>
                  <th scope="col">Year</th>
                  <th scope="col">Position(s) Held</th>
                  <th scope="col">Were You Elected?</th>                
                  <th scope="col">Hours/week</th> 
                  <th scope="col">Weeks/year</th>
                </tr>
              </thead>
              <tbody data-bind="foreach: years">
                <tr>
                  <th scope="row">
                    <input type="checkbox" data-bind="attr: { id: activeId }, checkbox: isActive"/>
                    <label class="inline" data-bind="attr: { for: activeId }, text: name"></label>
                  </th>
                  <td>
                    <label class="hide" data-bind="attr: { for: posId }">Position(s) Held</label>
                    <input type="text" maxlength=40 data-bind="attr: { id: posId, title: posTitle }, textbox: position"/>
                  </td>
                  <td>
                    <label class="hide" data-bind="attr: { for: electId }">Were you elected?</label>
                    <select data-bind="attr: { id: electId }, selectOne: isElected">
                      <option value="Y" data-bind="attr: { title: electTitleY }">Yes</option>
                      <option value="N" data-bind="attr: { title: electTitleN }">No</option>
                      <option value="X" data-bind="attr: { title: electTitleNA }">Not Applicable</option>
                    </select>
                  </td>
                  <td>
                    <label class="hide" data-bind="attr: { for: hoursId }, text: 'Hours per week'"></label>
                    <input type="text" maxlength=2 data-bind="attr: { id: hoursId }, textbox: hours"/>
                  </td>
                  <td>
                    <label class="hide" data-bind="attr: { for: weeksId }, text: 'Weeks per year'"></label>
                    <input type="text" maxlength=2 data-bind="attr: { id: weeksId }, textbox: weeks"/>
                  </td>
                </tr>
              </tbody>
            </table>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</body>
</html>

